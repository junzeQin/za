<mxfile host="drawio-plugin" modified="2022-12-12T09:09:36.294Z" agent="5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.102 Safari/537.36" etag="Tc44ZWSy8QI3qOekzWGE" version="20.5.3" type="embed"><diagram name="Page-1" id="c7558073-3199-34d8-9f00-42111426c3f3"><mxGraphModel dx="1087" dy="907" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="826" pageHeight="1169" background="none" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><UserObject label="bcp" id="98"><mxCell style="swimlane;horizontal=0;html=1;fontFamily=Lucida Console;verticalAlign=middle;fontSize=16;align=center;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="20" y="762" width="3960" height="3428" as="geometry"/></mxCell></UserObject><mxCell id="226" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="98" source="222" target="225" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="222" value="&lt;div class=&quot;mind-clipboard&quot; style=&quot;font-size: 16px;&quot;&gt;setTransType(RENEWAL(4, &quot;续期&quot;))&lt;div style=&quot;font-size: 16px;&quot;&gt;setBillStatus(PENDING(1, &quot;待处理&quot;),TRANSFER_FAILURE(7, &quot;转账失败&quot;))&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;setArapAccountType(SOFT_BANK_CREDIT_CARD(115, &quot;softBank-信用卡&quot;),CASH_PAY_PAY_SJ(123, &quot;现金Pay-Pay(SJ)&quot;))&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center; font-size: 16px;&quot;&gt;以上作为条件查询&lt;/div&gt;&lt;div style=&quot;text-align: center; font-size: 16px;&quot;&gt;bill&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontFamily=Lucida Console;align=left;fontSize=16;" parent="98" vertex="1"><mxGeometry x="280" y="57.809999999999995" width="440" height="166.87" as="geometry"/></mxCell><mxCell id="224" value="&lt;span style=&quot;color: rgb(16, 18, 20); font-family: &amp;quot;PingFang SC&amp;quot;, &amp;quot;Segoe UI&amp;quot;, Arial, &amp;quot;Microsoft YaHei&amp;quot;, 微软雅黑, 宋体, &amp;quot;Malgun Gothic&amp;quot;, sans-serif; font-size: 14px; text-align: start; background-color: rgb(255, 255, 255);&quot;&gt;编排调度&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="98" vertex="1"><mxGeometry x="90" y="56" width="120" height="30" as="geometry"/></mxCell><mxCell id="280" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="98" source="225" target="227" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="225" value="&lt;div class=&quot;mind-clipboard&quot; style=&quot;font-size: 16px;&quot;&gt;&lt;div class=&quot;mind-clipboard&quot; style=&quot;font-size: 16px;&quot;&gt;每页最大的ID，以每页limit1000为基准，分页查询，按id正序排序，取每页最后一条记录更新maxIdValue，作为下一个分页查询的条件&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="811" y="86" width="230" height="109.25" as="geometry"/></mxCell><mxCell id="227" value="&lt;div class=&quot;mind-clipboard&quot; style=&quot;font-size: 16px;&quot;&gt;查询获取到list&lt;div style=&quot;font-size: 16px;&quot;&gt;遍历，异步处理每个object&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;absoluteArcSize=1;arcSize=14;strokeWidth=2;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1120" y="96.25" width="150" height="90" as="geometry"/></mxCell><mxCell id="221" value="&lt;font color=&quot;#323232&quot;&gt;&lt;span style=&quot;background-color: rgba(255, 255, 255, 0.01);&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;续期扣款&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;renewAuthory&lt;br&gt;Schedule&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Lucida Console;" parent="98" vertex="1"><mxGeometry x="106.5" y="100.75" width="87" height="81" as="geometry"/></mxCell><mxCell id="223" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="98" source="221" target="222" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="253" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="251" target="252" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="251" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;dueDate计算出的最后缴费日期[lastPaymentDate]，计算方法是取dueDate的月份-1的月末23:59:59日期&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fontFamily=Lucida Console;" parent="98" vertex="1"><mxGeometry x="1262.51" y="288" width="224.99" height="92" as="geometry"/></mxCell><mxCell id="255" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="252" target="254" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="256" value="大于" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" parent="255" vertex="1" connectable="0"><mxGeometry x="-0.1752" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="264" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="252" target="263" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="265" value="小于等于" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" parent="264" vertex="1" connectable="0"><mxGeometry x="-0.2444" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="252" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;bizTime comapre&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(50, 50, 50); font-family: 微软雅黑; font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;lastPaymentDate&lt;/span&gt;&lt;span style=&quot;color: rgb(50, 50, 50); font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1338.13" y="468" width="73.75" height="60" as="geometry"/></mxCell><mxCell id="254" value="&lt;font color=&quot;#323232&quot;&gt;&lt;span style=&quot;background-color: rgba(255, 255, 255, 0.01);&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;stop&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Lucida Console;" parent="98" vertex="1"><mxGeometry x="1132" y="457.5" width="87" height="81" as="geometry"/></mxCell><mxCell id="262" value="比如dueDate是2022年12月12日，那么lastpaymentDate计算出便来2022-11-30 23:59:59" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1010" y="350" width="250" height="50" as="geometry"/></mxCell><mxCell id="292" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="263" target="290" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="263" value="查询保单详情" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1312.5" y="618" width="125" height="42" as="geometry"/></mxCell><mxCell id="272" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;dashed=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="98" source="266" target="268" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="274" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="266" target="273" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="266" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-family: 微软雅黑; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;查询保单bcp相关记录详情&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1306.26" y="906" width="137.49" height="52" as="geometry"/></mxCell><mxCell id="268" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-family: 微软雅黑; font-weight: 400; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;查询保单bcp相关记录详情&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="110" y="667" width="900" height="292" as="geometry"/></mxCell><mxCell id="269" value="&lt;div class=&quot;mind-clipboard&quot;&gt;SELECT&lt;div&gt;&lt;/div&gt;*&lt;div&gt;&lt;/div&gt;FROM&lt;div&gt;&lt;/div&gt;bill &lt;div&gt;&lt;/div&gt;WHERE&lt;div&gt;&lt;/div&gt;1 = 1 &lt;div&gt;&lt;/div&gt;AND policy_no = 'SAH300240007' &lt;div&gt;&lt;/div&gt;AND trans_type = 4 &lt;div&gt;&lt;/div&gt;AND bill_status IN ( 1, 7 ) &lt;div&gt;&lt;/div&gt;AND payee_id IN ( 9559386 ) &lt;div&gt;&lt;/div&gt;AND is_deleted = 'N'&lt;/div&gt;" style="shape=note;size=20;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;align=left;" parent="268" vertex="1"><mxGeometry x="10" y="39.5" width="280" height="240.5" as="geometry"/></mxCell><mxCell id="270" value="&lt;div class=&quot;mind-clipboard&quot;&gt;&lt;div class=&quot;mind-clipboard&quot;&gt;SELECT&lt;div&gt;&lt;/div&gt;*&lt;div&gt;&lt;/div&gt;FROM&lt;div&gt;&lt;/div&gt;receivable_payable &lt;div&gt;&lt;/div&gt;WHERE&lt;div&gt;&lt;/div&gt;1 = 1 &lt;div&gt;&lt;/div&gt;AND bill_id = 9703721 &lt;div&gt;&lt;/div&gt;AND policy_no = 'SAH300240007' &lt;div&gt;&lt;/div&gt;AND payee_id = 9559386&amp;nbsp;&amp;nbsp;&lt;div&gt;&lt;/div&gt;AND is_deleted = 'N'&lt;/div&gt;&lt;/div&gt;" style="shape=note;size=20;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;align=left;" parent="268" vertex="1"><mxGeometry x="310" y="39.5" width="280" height="240.5" as="geometry"/></mxCell><mxCell id="271" value="&lt;div class=&quot;mind-clipboard&quot;&gt;&lt;div class=&quot;mind-clipboard&quot;&gt;SELECT&lt;div&gt;&lt;/div&gt;* &lt;div&gt;&lt;/div&gt;FROM&lt;div&gt;&lt;/div&gt;bcp_ext_info &lt;div&gt;&lt;/div&gt;WHERE&lt;div&gt;&lt;/div&gt;1 = 1 &lt;div&gt;&lt;/div&gt;AND bill_id = 9703721 &lt;div&gt;&lt;/div&gt;AND is_deleted = 'N'&lt;/div&gt;&lt;/div&gt;" style="shape=note;size=20;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;align=left;" parent="268" vertex="1"><mxGeometry x="606" y="69.5" width="282" height="180.5" as="geometry"/></mxCell><mxCell id="276" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=200;entryDy=95;entryPerimeter=0;dashed=1;fontFamily=Lucida Console;fontSize=16;" parent="98" source="273" target="275" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="279" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Lucida Console;fontSize=16;" parent="98" source="273" target="277" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="273" value="&lt;font face=&quot;微软雅黑&quot; color=&quot;#323232&quot;&gt;&lt;span style=&quot;background-color: rgba(255, 255, 255, 0.01);&quot;&gt;查询支付方式配置&lt;/span&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1303.14" y="1036" width="143.74" height="42" as="geometry"/></mxCell><mxCell id="275" value="&lt;div class=&quot;mind-clipboard&quot;&gt;SELECT&lt;div&gt;&lt;/div&gt;*&lt;div&gt;&lt;/div&gt;FROM&lt;div&gt;&lt;/div&gt;payment_config &lt;div&gt;&lt;/div&gt;WHERE&lt;div&gt;&lt;/div&gt;1 = 1 &lt;div&gt;&lt;/div&gt;AND pay_method = 123 &lt;div&gt;&lt;/div&gt;AND is_deleted = 'N'&lt;/div&gt;" style="shape=note;size=20;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;align=left;" parent="98" vertex="1"><mxGeometry x="826" y="1011" width="200" height="170" as="geometry"/></mxCell><mxCell id="283" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="98" source="277" target="281" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="284" value="&lt;font face=&quot;Lucida Console&quot; style=&quot;font-size: 16px;&quot;&gt;ELSE&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="283" vertex="1" connectable="0"><mxGeometry x="-0.266" relative="1" as="geometry"><mxPoint x="-36" y="37" as="offset"/></mxGeometry></mxCell><mxCell id="285" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="277" target="282" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="286" value="NEED_NOW_PAY" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" parent="285" vertex="1" connectable="0"><mxGeometry x="-0.3268" y="1" relative="1" as="geometry"><mxPoint x="35" y="38" as="offset"/></mxGeometry></mxCell><mxCell id="277" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;支付类型&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1338.14" y="1149" width="73.75" height="60" as="geometry"/></mxCell><mxCell id="289" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="281" target="288" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="281" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-family: 微软雅黑; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;confirmRenewBill&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1159.4" y="1266" width="143.74" height="42" as="geometry"/></mxCell><mxCell id="287" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="282" target="281" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="282" value="&lt;font face=&quot;微软雅黑&quot; color=&quot;#323232&quot;&gt;&lt;span style=&quot;background-color: rgba(255, 255, 255, 0.01);&quot;&gt;调用PAYPAY扣款&lt;/span&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1437.5" y="1266" width="143.74" height="42" as="geometry"/></mxCell><mxCell id="288" value="&lt;font color=&quot;#323232&quot;&gt;&lt;span style=&quot;background-color: rgba(255, 255, 255, 0.01);&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;stop&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Lucida Console;" parent="98" vertex="1"><mxGeometry x="1187.77" y="1374" width="87" height="81" as="geometry"/></mxCell><mxCell id="291" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="290" target="266" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="296" value="有效" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" parent="291" vertex="1" connectable="0"><mxGeometry x="-0.3188" y="-2" relative="1" as="geometry"><mxPoint y="1" as="offset"/></mxGeometry></mxCell><mxCell id="297" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="290" target="293" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="298" value="无效" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" parent="297" vertex="1" connectable="0"><mxGeometry x="-0.2307" y="-3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="290" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;保单状态&lt;/span&gt;&lt;span style=&quot;color: rgb(50, 50, 50); font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="1338.13" y="749" width="73.75" height="60" as="geometry"/></mxCell><mxCell id="293" value="&lt;font color=&quot;#323232&quot;&gt;&lt;span style=&quot;background-color: rgba(255, 255, 255, 0.01);&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;stop&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_2;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Lucida Console;" parent="98" vertex="1"><mxGeometry x="1132" y="738.5" width="87" height="81" as="geometry"/></mxCell><mxCell id="303" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="299" target="302" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="299" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-family: 微软雅黑; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;查询续期(续保)交易流水号（续期抽档时塞进去的）&lt;/span&gt;" style="rounded=1;html=1;fontFamily=Lucida Console;fontSize=16;whiteSpace=wrap;" parent="98" vertex="1"><mxGeometry x="2620" y="1088" width="190" height="72" as="geometry"/></mxCell><mxCell id="306" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="302" target="304" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="308" value="ELSE" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" parent="306" vertex="1" connectable="0"><mxGeometry x="-0.1513" y="-3" relative="1" as="geometry"><mxPoint x="-132" y="43" as="offset"/></mxGeometry></mxCell><mxCell id="307" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" parent="98" source="302" target="317" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="2935" y="1387" as="targetPoint"/></mxGeometry></mxCell><mxCell id="309" value="TRANSFER_FAILURE" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" parent="307" vertex="1" connectable="0"><mxGeometry x="0.3811" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="302" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;bill的status&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="2678.12" y="1217" width="73.75" height="60" as="geometry"/></mxCell><mxCell id="304" value="" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;" parent="98" vertex="1"><mxGeometry x="2220" y="1387" width="250" height="122" as="geometry"/></mxCell><mxCell id="323" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" edge="1" parent="98" source="317" target="318"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="328" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;fontFamily=Lucida Console;fontSize=16;" edge="1" parent="98" source="317" target="327"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="317" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-family: 微软雅黑; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;根据保单号以及支付流水号查询[third_party_transaction_record 调用第三方接口详情记录表]，根据gmtCreated字段倒叙排序，获取最新的一条记录，记为record&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Lucida Console;fontSize=16;" vertex="1" parent="98"><mxGeometry x="3110" y="1527" width="250" height="122" as="geometry"/></mxCell><mxCell id="329" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0;entryDx=250;entryDy=151;entryPerimeter=0;dashed=1;fontFamily=Lucida Console;fontSize=16;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="98" source="318" target="324"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="331" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;fontFamily=Lucida Console;fontSize=16;" edge="1" parent="98" source="318" target="330"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="318" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-family: 微软雅黑; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;系统配置有第三方返回结果标识，调用记录record中的code字段是否包含在系统配置中&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=16;" vertex="1" parent="98"><mxGeometry x="3125" y="1738" width="220" height="72" as="geometry"/></mxCell><mxCell id="324" value="&lt;div style=&quot;font-size: 12px;&quot;&gt;400|INVALID_REQUEST_PARAMS&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;401|OP_OUT_OF_SCOPE&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|MISSING_REQUEST_PARAMS&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|INVALID_PARAMS&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;401|UNAUTHORIZED&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;401|INVALID_USER_AUTHORIZATION_ID&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;401|EXPIRED_USER_AUTHORIZATION_ID&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;404|OPA_CLIENT_NOT_FOUND&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;429|RATE_LIMIT&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|CC_LIMIT_EXCEEDED&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|PPC_BAD_REQUEST&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|PPC_EXPIRED&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|PPC_LIMIT_EXCEEDED&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|SUSPECTED_DUPLICATE_PAYMENT&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|UNACCEPTABLE_OP&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|NON_KYC_USER&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;400|NO_SUFFICIENT_FUND&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;404|RESOURCE_NOT_FOUND&lt;/div&gt;&lt;div style=&quot;font-size: 12px;&quot;&gt;500|TRANSACTION_FAILED&lt;/div&gt;" style="shape=note;size=20;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Lucida Console;align=left;" vertex="1" parent="98"><mxGeometry x="2790" y="1598" width="250" height="282" as="geometry"/></mxCell><mxCell id="327" value="&lt;div class=&quot;mind-clipboard&quot;&gt;&lt;div class=&quot;mind-clipboard&quot;&gt;SELECT&lt;div&gt;&lt;/div&gt;* &lt;div&gt;&lt;/div&gt;FROM&lt;div&gt;&lt;/div&gt;sj_gr_bcp.third_party_transaction_record &lt;div&gt;&lt;/div&gt;WHERE&lt;div&gt;&lt;/div&gt;1 = 1 &lt;div&gt;&lt;/div&gt;AND policy_no = 'SAF300247092' &lt;div&gt;&lt;/div&gt;AND transaction_no = '309202210100141671321' &lt;div&gt;&lt;/div&gt;AND is_deleted = 'N'&lt;/div&gt;&lt;/div&gt;" style="shape=note;size=20;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=16;align=left;" vertex="1" parent="98"><mxGeometry x="3440" y="1455" width="350" height="212" as="geometry"/></mxCell><mxCell id="336" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Lucida Console;fontSize=16;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="98" source="330" target="332"><mxGeometry relative="1" as="geometry"><mxPoint x="2996.75" y="1918" as="targetPoint"/></mxGeometry></mxCell><mxCell id="337" value="包含" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" vertex="1" connectable="0" parent="336"><mxGeometry x="0.0908" y="-6" relative="1" as="geometry"><mxPoint x="10" y="5" as="offset"/></mxGeometry></mxCell><mxCell id="341" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" edge="1" parent="98" source="330" target="339"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="342" value="不包含" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;fontFamily=Lucida Console;" vertex="1" connectable="0" parent="341"><mxGeometry x="-0.1596" y="3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="330" value="&lt;span style=&quot;color: rgb(50, 50, 50); font-size: 16px; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;code in&lt;br&gt;SystemConfig&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fontFamily=Lucida Console;fontSize=16;" vertex="1" parent="98"><mxGeometry x="3198.12" y="1888" width="73.75" height="60" as="geometry"/></mxCell><mxCell id="332" value="&lt;div class=&quot;mind-clipboard&quot;&gt;&lt;span style=&quot;font-size: inherit;&quot;&gt;生成新的续期交易流水号，并更新到bill以及extInfo表中&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=16;" vertex="1" parent="98"><mxGeometry x="2890" y="1988" width="220" height="52" as="geometry"/></mxCell><mxCell id="339" value="&lt;div class=&quot;mind-clipboard&quot;&gt;&lt;span style=&quot;color: rgb(50, 50, 50); font-family: 微软雅黑; background-color: rgba(255, 255, 255, 0.01);&quot;&gt;根据之前的交易流水号查询支付结果&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontFamily=Verdana;fontSize=16;" vertex="1" parent="98"><mxGeometry x="3370" y="1988" width="170" height="52" as="geometry"/></mxCell><mxCell id="220" value="foundation" style="swimlane;horizontal=0;whiteSpace=wrap;html=1;fontSize=16;" parent="1" vertex="1"><mxGeometry x="20" y="440" width="3960" height="270" as="geometry"/></mxCell><mxCell id="301" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Lucida Console;fontSize=16;" parent="1" source="300" target="299" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="300" value="&lt;span style=&quot;color: rgb(50, 50, 50); background-color: rgba(255, 255, 255, 0.01);&quot;&gt;&lt;font&gt;RenewAuthoryByPayPalStrategy&lt;br&gt;operate&lt;/font&gt;&lt;/span&gt;" style="rounded=1;html=1;fontFamily=Lucida Console;fontSize=16;whiteSpace=wrap;" parent="1" vertex="1"><mxGeometry x="2655" y="1743" width="160" height="48" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>